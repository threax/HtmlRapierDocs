<!doctype html>
<html>
<head>
    <link rel="stylesheet" href="/edity/css/fade.min.css" type="text/css">
<link rel="stylesheet" href="/lib/bootstrap/dist/css/bootstrap-custom.css" type="text/css">

    <meta charset="UTF-8">
    <title>Default Page Title - HtmlRapier</title>
</head>
<body>
    <div class="container">
        <nav class="navbar navbar-inverse">
            <div class="container-fluid">
                <!-- Brand and toggle get grouped for better mobile display -->
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="/">HtmlRapier Docs</a>
                </div>

                <!-- Collect the nav links, forms, and other content for toggling -->
                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav navbar-right" data-editor-navmenu="">
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Reference <span class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li><a href="/Reference#DataAttributes">Data Attributes</a></li>
                                <li><a href="/Reference#JavascriptFunctions">Javscript Functions</a></li>
                                <li><a href="/Reference#OtherPatterns">Other Patterns</a></li>
                            </ul>
                        </li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Demo <span class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li><a href="/HelloWorldDemo">Hello World</a></li>
                                <li><a href="/SimpleFormInput">Simple Form Input</a></li>
                                <li><a href="/ToggleDemo">Toggles</a></li>
                                <li><a href="/TodoDemo">Todo List</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
        <div class="row">
            <div class="col-md-12">
                <h1>Todo List</h1>
<p>Add Items to the Todo List. You can mark them important by checking the important box.</p>
<p>&nbsp;</p>
<div data-hr-controller="todo">
	<ol data-hr-model="items"><template>
		<li><span>{{text}}</span><span class="pull-right"><a data-hr-on-click="edit">Edit</a> <a data-hr-on-click="deleteItem">Delete</a></span></li>
		</template><template data-hr-variant="important">
		<li style="color: red;"><span>{{text}}</span><span class="pull-right"><a data-hr-on-click="edit">Edit</a> <a data-hr-on-click="deleteItem">Delete</a></span></li>
		</template>
		<li>&nbsp;</li>
	</ol>
	<form data-hr-model="add" data-hr-on-submit="addItem">
		<div class="form-group"><label for="itemText">Enter A Todo Item</label> <input class="form-control" name="text" required="" type="text"></div>
		<div class="checkbox"><label><input name="important" type="checkbox"> Important </label></div><button type="submit">Add</button></form></div>
<h2>How&nbsp;Does It Work?&nbsp;</h2>
<h3>The Markup</h3>
<pre style="margin: 0px; line-height: 125%;"><span style="color: rgb(0, 119, 0);">&lt;div</span> <span style="color: rgb(0, 0, 204);">data-hr-controller=</span><span style="background-color: rgb(255, 240, 240);">&quot;todo&quot;</span><span style="color: rgb(0, 119, 0);">&gt;</span>
    <span style="color: rgb(0, 119, 0);">&lt;ol</span> <span style="color: rgb(0, 0, 204);">data-hr-model=</span><span style="background-color: rgb(255, 240, 240);">&quot;items&quot;</span><span style="color: rgb(0, 119, 0);">&gt;</span>
        <span style="color: rgb(0, 119, 0);">&lt;template&gt;</span>
            <span style="color: rgb(0, 119, 0);">&lt;li&gt;</span>
                <span style="color: rgb(0, 119, 0);">&lt;span&gt;</span>{{text}}<span style="color: rgb(0, 119, 0);">&lt;/span&gt;</span>
                <span style="color: rgb(0, 119, 0);">&lt;span</span> <span style="color: rgb(0, 0, 204);">class=</span><span style="background-color: rgb(255, 240, 240);">&quot;pull-right&quot;</span><span style="color: rgb(0, 119, 0);">&gt;&lt;a</span> <span style="color: rgb(0, 0, 204);">data-hr-on-click=</span><span style="background-color: rgb(255, 240, 240);">&quot;edit&quot;</span><span style="color: rgb(0, 119, 0);">&gt;</span>Edit<span style="color: rgb(0, 119, 0);">&lt;/a&gt;</span> <span style="color: rgb(0, 119, 0);">&lt;a</span> <span style="color: rgb(0, 0, 204);">data-hr-on-click=</span><span style="background-color: rgb(255, 240, 240);">&quot;deleteItem&quot;</span><span style="color: rgb(0, 119, 0);">&gt;</span>Delete<span style="color: rgb(0, 119, 0);">&lt;/a&gt;&lt;/span&gt;</span>
            <span style="color: rgb(0, 119, 0);">&lt;/li&gt;</span>
        <span style="color: rgb(0, 119, 0);">&lt;/template&gt;</span>
        <span style="color: rgb(0, 119, 0);">&lt;template</span> <span style="color: rgb(0, 0, 204);">data-hr-variant=</span><span style="background-color: rgb(255, 240, 240);">&quot;important&quot;</span><span style="color: rgb(0, 119, 0);">&gt;</span>
            <span style="color: rgb(0, 119, 0);">&lt;li</span> <span style="color: rgb(0, 0, 204);">style=</span><span style="background-color: rgb(255, 240, 240);">&quot;color: red;&quot;</span><span style="color: rgb(0, 119, 0);">&gt;</span>
                <span style="color: rgb(0, 119, 0);">&lt;span&gt;</span>{{text}}<span style="color: rgb(0, 119, 0);">&lt;/span&gt;</span>
                <span style="color: rgb(0, 119, 0);">&lt;span</span> <span style="color: rgb(0, 0, 204);">class=</span><span style="background-color: rgb(255, 240, 240);">&quot;pull-right&quot;</span><span style="color: rgb(0, 119, 0);">&gt;&lt;a</span> <span style="color: rgb(0, 0, 204);">data-hr-on-click=</span><span style="background-color: rgb(255, 240, 240);">&quot;edit&quot;</span><span style="color: rgb(0, 119, 0);">&gt;</span>Edit<span style="color: rgb(0, 119, 0);">&lt;/a&gt;</span> <span style="color: rgb(0, 119, 0);">&lt;a</span> <span style="color: rgb(0, 0, 204);">data-hr-on-click=</span><span style="background-color: rgb(255, 240, 240);">&quot;deleteItem&quot;</span><span style="color: rgb(0, 119, 0);">&gt;</span>Delete<span style="color: rgb(0, 119, 0);">&lt;/a&gt;&lt;/span&gt;</span>
            <span style="color: rgb(0, 119, 0);">&lt;/li&gt;</span>
        <span style="color: rgb(0, 119, 0);">&lt;/template&gt;</span>
    <span style="color: rgb(0, 119, 0);">&lt;/ol&gt;</span>
    <span style="color: rgb(0, 119, 0);">&lt;form</span> <span style="color: rgb(0, 0, 204);">data-hr-model=</span><span style="background-color: rgb(255, 240, 240);">&quot;add&quot;</span> <span style="color: rgb(0, 0, 204);">data-hr-on-submit=</span><span style="background-color: rgb(255, 240, 240);">&quot;addItem&quot;</span><span style="color: rgb(0, 119, 0);">&gt;</span>
        <span style="color: rgb(0, 119, 0);">&lt;div</span> <span style="color: rgb(0, 0, 204);">class=</span><span style="background-color: rgb(255, 240, 240);">&quot;form-group&quot;</span><span style="color: rgb(0, 119, 0);">&gt;</span>
            <span style="color: rgb(0, 119, 0);">&lt;label</span> <span style="color: rgb(0, 0, 204);">for=</span><span style="background-color: rgb(255, 240, 240);">&quot;itemText&quot;</span><span style="color: rgb(0, 119, 0);">&gt;</span>Enter A Todo Item<span style="color: rgb(0, 119, 0);">&lt;/label&gt;</span>
            <span style="color: rgb(0, 119, 0);">&lt;input</span> <span style="color: rgb(0, 0, 204);">class=</span><span style="background-color: rgb(255, 240, 240);">&quot;form-control&quot;</span> <span style="color: rgb(0, 0, 204);">name=</span><span style="background-color: rgb(255, 240, 240);">&quot;text&quot;</span> <span style="color: rgb(0, 0, 204);">required=</span><span style="background-color: rgb(255, 240, 240);">&quot;&quot;</span> <span style="color: rgb(0, 0, 204);">type=</span><span style="background-color: rgb(255, 240, 240);">&quot;text&quot;</span> <span style="color: rgb(0, 119, 0);">/&gt;</span>
        <span style="color: rgb(0, 119, 0);">&lt;/div&gt;</span>
        <span style="color: rgb(0, 119, 0);">&lt;div</span> <span style="color: rgb(0, 0, 204);">class=</span><span style="background-color: rgb(255, 240, 240);">&quot;checkbox&quot;</span><span style="color: rgb(0, 119, 0);">&gt;</span>
            <span style="color: rgb(0, 119, 0);">&lt;label&gt;</span>
                <span style="color: rgb(0, 119, 0);">&lt;input</span> <span style="color: rgb(0, 0, 204);">name=</span><span style="background-color: rgb(255, 240, 240);">&quot;important&quot;</span> <span style="color: rgb(0, 0, 204);">type=</span><span style="background-color: rgb(255, 240, 240);">&quot;checkbox&quot;</span> <span style="color: rgb(0, 119, 0);">/&gt;</span> Important
            <span style="color: rgb(0, 119, 0);">&lt;/label&gt;</span>
        <span style="color: rgb(0, 119, 0);">&lt;/div&gt;</span>
        <span style="color: rgb(0, 119, 0);">&lt;button</span> <span style="color: rgb(0, 0, 204);">type=</span><span style="background-color: rgb(255, 240, 240);">&quot;submit&quot;</span><span style="color: rgb(0, 119, 0);">&gt;</span>Add<span style="color: rgb(0, 119, 0);">&lt;/button&gt;</span>
    <span style="color: rgb(0, 119, 0);">&lt;/form&gt;</span>
<span style="color: rgb(0, 119, 0);">&lt;/div&gt;</span></pre>
<p>Here we define a controller called todo with a model called items. Inside the items we define the template we want&nbsp;to use to display the items. This also defines a variant chain that defines a variant called important. This variant will be used to display items we mark as important. By linking all the variants together one after another they will become associated with each other when they are registered in the component system.</p>
<p>This page also defines a form for entering a new item with a name and a check box to determine if it is important.</p>
<h3>The Javascript</h3>
<pre style="margin: 0px; line-height: 125%;"><span style="background-color: rgb(255, 240, 240);">&quot;use strict&quot;</span>;

jsns.run([
    <span style="background-color: rgb(255, 240, 240);">&quot;hr.controller&quot;</span>
], <span style="color: rgb(0, 136, 0); font-weight: bold;">function</span> (exports, module, controller) {
    <span style="color: rgb(0, 136, 0); font-weight: bold;">function</span> TodoDemoController(bindings) {
        <span style="color: rgb(0, 136, 0); font-weight: bold;">var</span> addModel <span style="color: rgb(51, 51, 51);">=</span> bindings.getModel(<span style="background-color: rgb(255, 240, 240);">&#39;add&#39;</span>);
        <span style="color: rgb(0, 136, 0); font-weight: bold;">var</span> itemsModel <span style="color: rgb(51, 51, 51);">=</span> bindings.getModel(<span style="background-color: rgb(255, 240, 240);">&#39;items&#39;</span>);
        itemsModel.clear();
        <span style="color: rgb(0, 136, 0); font-weight: bold;">var</span> todoItems <span style="color: rgb(51, 51, 51);">=</span> [];
        <span style="color: rgb(0, 136, 0); font-weight: bold;">var</span> self <span style="color: rgb(51, 51, 51);">=</span> <span style="color: rgb(0, 136, 0); font-weight: bold;">this</span>;

        <span style="color: rgb(0, 136, 0); font-weight: bold;">function</span> findItemVariant(item){
            <span style="color: rgb(0, 136, 0); font-weight: bold;">if</span> (item.important <span style="color: rgb(51, 51, 51);">===</span> <span style="background-color: rgb(255, 240, 240);">&quot;on&quot;</span>) {
                <span style="color: rgb(0, 136, 0); font-weight: bold;">return</span> <span style="background-color: rgb(255, 240, 240);">&quot;important&quot;</span>;
            }
        }

        <span style="color: rgb(0, 136, 0); font-weight: bold;">function</span> addItem(evt) {
            evt.preventDefault();
            <span style="color: rgb(0, 136, 0); font-weight: bold;">var</span> item <span style="color: rgb(51, 51, 51);">=</span> addModel.getData();
            itemsModel.appendData(item, controller.createOnCallback(TodoItemController, self), findItemVariant);
            todoItems.push(item);
            addModel.clear();
        }
        <span style="color: rgb(0, 136, 0); font-weight: bold;">this</span>.addItem <span style="color: rgb(51, 51, 51);">=</span> addItem;

        <span style="color: rgb(0, 136, 0); font-weight: bold;">function</span> removeItem(item) {
            <span style="color: rgb(0, 136, 0); font-weight: bold;">var</span> index <span style="color: rgb(51, 51, 51);">=</span> todoItems.indexOf(item);
            <span style="color: rgb(0, 136, 0); font-weight: bold;">if</span> (index <span style="color: rgb(51, 51, 51);">!=</span> <span style="color: rgb(51, 51, 51);">-</span><span style="color: rgb(0, 0, 221); font-weight: bold;">1</span>) {
                todoItems.splice(index, <span style="color: rgb(0, 0, 221); font-weight: bold;">1</span>);
                rebuildList();
            }
        }
        <span style="color: rgb(0, 136, 0); font-weight: bold;">this</span>.removeItem <span style="color: rgb(51, 51, 51);">=</span> removeItem;

        <span style="color: rgb(0, 136, 0); font-weight: bold;">function</span> rebuildList() {
            itemsModel.setData(todoItems, controller.createOnCallback(TodoItemController, self), findItemVariant);
        }
        <span style="color: rgb(0, 136, 0); font-weight: bold;">this</span>.rebuildList <span style="color: rgb(51, 51, 51);">=</span> rebuildList;
    }

    <span style="color: rgb(0, 136, 0); font-weight: bold;">function</span> TodoItemController(bindings, context, itemData) {
        <span style="color: rgb(0, 136, 0); font-weight: bold;">var</span> todoDemoController <span style="color: rgb(51, 51, 51);">=</span> context;

        <span style="color: rgb(0, 136, 0); font-weight: bold;">function</span> edit(evt) {
            evt.preventDefault();
            <span style="color: rgb(136, 136, 136);">//This is a silly way to edit, but trying to keep it short.</span>
            itemData.text <span style="color: rgb(51, 51, 51);">=</span> <span style="color: rgb(0, 112, 32);">window</span>.prompt(<span style="background-color: rgb(255, 240, 240);">&quot;Edit Todo Item&quot;</span>, itemData.text);
            todoDemoController.rebuildList();
        }
        <span style="color: rgb(0, 136, 0); font-weight: bold;">this</span>.edit <span style="color: rgb(51, 51, 51);">=</span> edit;

        <span style="color: rgb(0, 136, 0); font-weight: bold;">function</span> deleteItem(evt) {
            evt.preventDefault();
            <span style="color: rgb(136, 136, 136);">//Silly to use confirm, but done for size</span>
            <span style="color: rgb(0, 136, 0); font-weight: bold;">if</span> (<span style="color: rgb(0, 112, 32);">window</span>.confirm(<span style="background-color: rgb(255, 240, 240);">&quot;Do you want to delete &quot;</span> <span style="color: rgb(51, 51, 51);">+</span> itemData.text <span style="color: rgb(51, 51, 51);">+</span> <span style="background-color: rgb(255, 240, 240);">&quot;?&quot;</span>)) {
                todoDemoController.removeItem(itemData);
            }
        }
        <span style="color: rgb(0, 136, 0); font-weight: bold;">this</span>.deleteItem <span style="color: rgb(51, 51, 51);">=</span> deleteItem;
    }

    controller.create(<span style="background-color: rgb(255, 240, 240);">&quot;todo&quot;</span>, TodoDemoController);
});</pre>
<p>This javascript defines 2 controllers. One for the todo list itself that controls the form and the list display. The other is for the individual list items and one will be created each time a list item is created. That second controller shows the other arguments your controller constructors can take. <em>Context </em>is anything you want it to be when constructing the constructor. Here it is set to the TodoDemoController itself. The final argument is <em>data </em>and represents the data (or row of data) that was used when the controller was created.</p>
<p>The TodoItemController is created for each individual list item, in addition these are all recreated when rebuildList is called since it throws away the old list. The lifecycles of these objects are up to the developer, but used this way they will fall out of scope when the list is rebuilt.</p>
<p>&nbsp;</p>
                <div class="footer"></div>
            </div>
        </div>
    </div>
    <script type="text/javascript" src="/lib/bootstrap.native/dist/bootstrap-native.min.js"></script>
<script type="text/javascript" src="/lib/HtmlRapier/HtmlRapier.js"></script>
<script type="text/javascript" src="/TodoDemo.js"></script>

</body>
</html>